# 常见系统的数据结构应用

## MySQL

MySQL 的索引就是在 B+ 树的基础上稍微改造了一点来实现的，主要改变的是：

1. 父节点中存储的记录是下层子树中的最小值
2. 非叶子节点的子树指针与关键字个数相同（其实这一条也是由于上一条导致的）

另外，对于不同的 MySQL 的存储引擎，对于 B+ 树的索引实现，也有细微的区别：

* MyISAM 引擎中 B+ 树的叶子节点存放的是**记录的地址**
* InnoDB 引擎中，主索引（即主键索引，也就是数据文件）中的叶子节点存储的是**完整的数据记录**，这种索引叫做聚集索引。而其他索引（辅助索引 / 非聚集索引）中的叶子节点存储的是**主键值**，因此走辅助索引的话需要走两步，**先找到主键，再通过主键从主键索引中检索具体记录**。

这里顺便说两点：

1. 因为InnoDB的数据文件本身要按主键聚集，所以InnoDB要求表必须有主键（MyISAM 可以没有），如果没有显式指定，则 MySQL 系统会自动选择一个可以唯一标识数据记录的列作为主键，如果不存在这种列，则 MySQL 自动为 InnoDB 表生成一个隐含字段作为主键，这个字段长度为 6 个字节，类型为长整型。
2. 因为辅助索引都保存引用主键索引，所以**不建议 InnoDB 表主键设置过长**，否则将使辅助索引变得过大。
3. **尽量在 InnoDB 上采用自增字段做主键**，因为这样的话，每次插入新的记录，记录就会顺序添加到当前索引节点的后续位置，当一页写满，就会自动开辟一个新的页。否则每次新纪录可能都要被插到现有索引页的中间某个位置，这会带来数据移动和分页等操作，还会造成大量的碎片。

## Redis



跳表，为什么不用平衡二叉树

<https://www.cnblogs.com/a8457013/p/8252011.html>

https://news.ycombinator.com/item?id=1171423



HDFS

HBase

Kafka

TiDB

